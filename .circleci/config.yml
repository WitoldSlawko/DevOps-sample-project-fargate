version: 2
jobs:
  build:
    docker:
        - image: circleci/node:lts
    working_directory: ~/repo
    steps:
        - checkout
        - run: npm -v
        - run: node -v
        - run: npm install -d
        - run: ls node_modules
        - run: npm run build
        - run: npm run cdk synth
        - run: echo "y" |  npm run cdk deploy --require-approval=never